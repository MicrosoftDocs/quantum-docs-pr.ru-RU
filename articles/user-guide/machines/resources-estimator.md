---
title: Оценщик ресурсов такта — пакет средств разработки тактов
description: Сведения о оценщике ресурсов Microsoft КДК, который оценивает ресурсы, необходимые для выполнения определенного экземпляра Q# операции на компьютере-такте.
author: anpaz
ms.author: anpaz
ms.date: 06/26/2020
ms.topic: conceptual
uid: microsoft.quantum.machines.resources-estimator
no-loc:
- Q#
- $$v
ms.openlocfilehash: c3aa94c8b34ad7247fbdeab4bf4dcb96ce746014
ms.sourcegitcommit: 71605ea9cc630e84e7ef29027e1f0ea06299747e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/26/2021
ms.locfileid: "98847463"
---
# <a name="quantum-development-kit-qdk-resources-estimator"></a>Оценщик ресурсов пакета средств разработки такта (КДК)

Как следует из названия, `ResourcesEstimator` класс оценивает ресурсы, необходимые для выполнения заданного экземпляра Q# операции на компьютере-такте. Это достигается путем запуска операции такта без фактической имитации состояния тактового компьютера. по этой причине он оценивает ресурсы для Q# операций, использующих тысячи Кубитс, при условии, что классическая часть кода выполняется в разумное время.

Средство оценки ресурсов построено на основе [имитатора трассировки тактов](xref:microsoft.quantum.machines.qc-trace-simulator.intro), предоставляющего более широкий набор метрик и средств, помогающих в отладке Q# программ.

## <a name="invoking-and-running-the-resources-estimator"></a>Вызов и запуск средства оценки ресурсов

Для выполнения любой операции можно использовать Оценщик ресурсов Q# . Дополнительные сведения см. [в статье способы запуска Q# программы](xref:microsoft.quantum.guide.host-programs).

### <a name="invoking-the-resources-estimator-from-c"></a>Вызов средства оценки ресурсов из C # 

Как и в случае с другими целевыми компьютерами, вам сначала нужно создать экземпляр класса `ResourcesEstimator`, а затем передать его в качестве первого параметра метода `Run` операции.

Учтите, что в отличие от класса `QuantumSimulator` класс `ResourcesEstimator` не реализует интерфейс <xref:System.IDisposable>, поэтому вам не нужно заключать его в оператор `using`.

```csharp
using Microsoft.Quantum.Simulation.Core;
using Microsoft.Quantum.Simulation.Simulators;

namespace Quantum.MyProgram
{
    class Driver
    {
        static void Main(string[] args)
        {
            ResourcesEstimator estimator = new ResourcesEstimator();
            MyQuantumProgram.Run(estimator).Wait();
            Console.WriteLine(estimator.ToTSV());
        }
    }
}
```

Как показано в примере, `ResourcesEstimator` предоставляет `ToTSV()` метод, создающий таблицу со значениями, разделенными табуляцией (TSV). Можно сохранить таблицу в файл или отобразить ее в консоли для анализа. Ниже приведен пример выходных данных из предыдущей программы:

```output
Metric          Sum
CNOT            1000
QubitClifford   1000
R               0
Measure         4002
T               0
Depth           0
Width           2
BorrowedWidth   0
```

> [!NOTE]
> `ResourcesEstimator`Экземпляр не сбрасывает свои вычисления при каждом запуске. Если вы используете один и тот же экземпляр для выполнения другой операции, он объединяет новые результаты с существующими результатами. Если необходимо сбросить вычисления между запусками, создайте новый экземпляр для каждого запуска.

### <a name="invoking-the-resources-estimator-from-python"></a>Вызов средства оценки ресурсов из Python

Используйте метод [estimate_resources ()](https://docs.microsoft.com/python/qsharp-core/qsharp.loader.qsharpcallable) из библиотеки Python с импортированной Q# операцией:

```python
qubit_result = myOperation.estimate_resources()
```

### <a name="invoking-the-resources-estimator-from-the-command-line"></a>Вызов средства оценки ресурсов из командной строки

При запуске Q# программы из командной строки используйте параметр **--симулятор** (или **-s** ), чтобы указать `ResourcesEstimator` целевой компьютер. Следующая команда запускает программу с помощью средства оценки ресурсов: 

```dotnetcli
dotnet run -s ResourcesEstimator
```

### <a name="invoking-the-resources-estimator-from-juptyer-notebooks"></a>Вызов средства оценки ресурсов из записных книжек Жуптер

Q#Для выполнения операции используйте команду "я волшеб" [% "Оценка](xref:microsoft.quantum.iqsharp.magic-ref.simulate) " Q# .

```
%estimate myOperation
```

## <a name="programmatically-retrieving-the-estimated-data"></a>Получение оценочных данных программными средствами

Помимо таблицы TSV, можно программным способом получить ресурсы, предполагаемые во время выполнения, с помощью `Data` Свойства средства оценки ресурсов. `Data`Свойство предоставляет `System.DataTable` экземпляр с двумя столбцами: `Metric` и `Sum` , индексированными по именам метрик.

В следующем коде показано, как получить и напечатать общее число `QubitClifford` `T` операций, а также `CNOT` операции, используемые Q# операцией:

```csharp
using Microsoft.Quantum.Simulation.Core;
using Microsoft.Quantum.Simulation.Simulators;

namespace Quantum.MyProgram
{
    class Driver
    {
        static void Main(string[] args)
        {
            ResourcesEstimator estimator = new ResourcesEstimator();
            MyQuantumProgram.Run(estimator).Wait();

            var data = estimator.Data;
            Console.WriteLine($"QubitCliffords: {data.Rows.Find("QubitClifford")["Sum"]}");
            Console.WriteLine($"Ts: {data.Rows.Find("T")["Sum"]}");
            Console.WriteLine($"CNOTs: {data.Rows.Find("CNOT")["Sum"]}");
        }
    }
}
```

## <a name="metrics-reported"></a>Сообщаемые метрики

Оценщик ресурсов отслеживает следующие метрики:

|Метрика|Описание|
|----|----|
|__CNOT__    |Число запусков `CNOT` операций (также известных как контролируемые операции Паули X).|
|__кубитклиффорд__ |Число запусков отдельных операций кубит Клиффорд и Паули.|
|__Measure__    |Количество запусков любых измерений.  |
|__R__    |Число запусков однокубитных поворотов, исключая `T` , Клиффорд и Паули операции.  |
|__T__    |Число запусков `T` операций и их сопряжений, включая `T` операции, T_x = H. t. H и T_y = Хи. T. Хи.  |
|__Depth__|Глубина тактовой цепи, выполняемой Q# операцией (см. [ниже](#depth-width-and-qubitcount)). По умолчанию метрика глубины подсчитывает только `T` шлюзы. Дополнительные сведения см. в разделе [счетчик глубины](xref:microsoft.quantum.machines.qc-trace-simulator.depth-counter).   |
|__Width__|Ширина тактовой цепи, выполняемой Q# операцией (см. [ниже](#depth-width-and-qubitcount)). По умолчанию метрика глубины подсчитывает только `T` шлюзы. Дополнительные сведения см. в разделе [Счетчик ширины](xref:microsoft.quantum.machines.qc-trace-simulator.width-counter).   |
|__кубиткаунт__    |Нижняя граница максимального числа Кубитс, выделенного во время выполнения Q# операции. Эта метрика может быть несовместима с __глубиной__ (см. ниже).  |
|__борроведвидс__    |Максимальное количество Кубитс, заимствованных внутри Q# операции.  |


## <a name="depth-width-and-qubitcount"></a>Глубина, ширина и Кубиткаунт

Сообщаемые оценки глубины и ширины совместимы друг с другом.
(Ранее оба числа были достижимы, но для глубины и ширины потребовались разные цепи.) В настоящее время обе метрики в этой паре могут быть достигнуты одним и тем же каналом одновременно.

В отчет включаются следующие метрики:

__Глубина:__ Для корневой операции время, необходимое для выполнения, при условии, что настроено время шлюза.
Для операций, которые называются или поочередно выполняются во время операции, разница между последним временем доступности кубит в начале и конце операции.

__Ширина:__ Для корневой операции — количество Кубитс, фактически используемое для ее выполнения (и операции).
Для операций, которые называются или выполняются последующими операциями, сколько больше Кубитс использовалось в дополнение к Кубитс, уже использованному в начале операции.

Обратите внимание, что повторно используемые Кубитс не вносят вклад в этот номер.
Т. е. Если несколько Кубитс были освобождены до начала операции, а все кубит, запрашиваемые этой операцией A (и операции, вызванные из), были удовлетворены повторной назначением Кубитс, то ширина операции A возвращается как 0. Успешное размещение Кубитс не влияет на ширину.

__Кубиткаунт:__ Для корневой операции — минимальное количество Кубитс, которое было бы достаточно для выполнения этой операции (и операций, вызванных из нее).
Для операций с именем или последующими операциями — минимальное количество Кубитс, которое было бы достаточно для выполнения этой операции отдельно. Это число не включает входные Кубитс. Он включает в себя заимствованный Кубитс.

Поддерживаются два режима работы. Режим выбирается с помощью параметра Кктрацесимулаторконфигуратион. Оптимизедепс.

__Оптимизедепс = false:__ Этот режим используется по умолчанию. Кубитманажер рекомендуется повторно использовать Кубитс и будет повторно использовать выпущенную Кубитс перед выделением новых. Для __ширины__ корневой операции принимает минимальную ширину (Нижняя граница). Информация __о совместимости может__ быть достигнута. __Кубиткаунт__ будет таким же, как и __Ширина__ для корневой операции без займа.

__Оптимизедепс = true:__ Кубитманажер не рекомендуется использовать для повторного использования кубит и оптимизации на основе эвристики для повторного использования кубит во время и после выполнения. Для __глубины__ корневой операции получает минимальную глубину (нижнюю границу). Для этой глубины отображается совместимая __Ширина__ (оба могут быть достигнуты одновременно). Чтобы оптимизировать ширину, шлюзы, обнаруженные позже в программе, могут быть запланированы раньше шлюзов, обнаруженных ранее в программе, но Кубитс планируется повторно использовать таким образом, чтобы глубина осталась минимальной. Поскольку Кубитс повторно используются на основе значений времени, рекомендуется, чтобы время шлюза было настроено как целочисленное значение. __Ширина__ не гарантируется оптимальной. Дополнительные сведения можно найти по [ширине и глубине технического документа в трассировочном](https://github.com/microsoft/qsharp-runtime/tree/main/src/Simulation/Simulators/QCTraceSimulator/Docs)документе.

## <a name="providing-the-probability-of-measurement-outcomes"></a>Предоставление вероятности результатов измерения

<xref:Microsoft.Quantum.Diagnostics.AssertMeasurementProbability>Из пространства имен можно использовать <xref:Microsoft.Quantum.Diagnostics> для предоставления сведений о ожидаемой вероятности операции измерения. Дополнительные сведения см. в статье [имитатор тактовой трассировки](xref:microsoft.quantum.machines.qc-trace-simulator.intro) .

## <a name="see-also"></a>См. также

- [Симулятор трассировки тактов](xref:microsoft.quantum.machines.qc-trace-simulator.intro)
- [Квантовый симулятор Тоффоли](xref:microsoft.quantum.machines.toffoli-simulator)
- [Квантовый симулятор полного состояния](xref:microsoft.quantum.machines.full-state-simulator) 
